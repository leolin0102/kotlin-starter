## 开发环境准备

Kotlin为我们提供了语言级别的全栈开发方案，本章我们来一步一步的setup，编译器环境，IDEA，Android Studio，并分实现web端，android，jvm和native端的‘hello kotlin’程序。

### 变异环境

Kotlin支持REPL，交互式运行环境，安装Kotlin SDK后就可以启动命令行窗口，输入kotlinc-jvm，就可以启动。

#### 手动安装

我们可以从github上下载最新版本的Kotlin的独立运行版本。最新的版本可以从下面的链接中下载。

https://github.com/JetBrains/kotlin/releases/tag/v1.1.3-2

下载 kotlin-compiler-1.1.3-2.zip 后，解压缩后，可以通过设置系统path路径到bin目录，这样我们就可以在我们的代码目录下运行编译命令来编译我们的代码，或者输入 kotlinc-jvm启动REPL模式.

注意：启动REPL环境前确保我们安装了最新版本的虚拟机，虽然Kotlin可以运行在1.6 java环境下，但是REPL模式，要求本地安装最新版本的java虚拟机。

leo$ kotlinc-jvm
Welcome to Kotlin version 1.1.3-2 (JRE 1.8.0_131-b11)
Type :help for help, :quit for quit
>>> 

#### SDKMAN! 安装

在UNIX based系统中，例如 OS X， Linux， Cygwin，FreeBSD下，使用SDKMAN!会很方便。首先如果我们还没有安装SDKMAN!，可以在命令行窗口下使用下面的命令来安装SDKMAN!

$ curl -s https://get.sdkman.io | bash

然后，重新打开一个命令行窗口，输入下面的命令，我们就可以完成安装了。

$ sdk install kotlin

#### HomeBrew 安装

如果我们的开发机器是MAC电脑，运行OS X，我们可以通过HomeBrew安装。

$ brew update
$ brew install kotlin

#### MacPorts

Mac下我们也可以使用下面的命令安装：

$ sudo port install kotlin

### 编写我们第一个Kotlin应用 （出发）

1. 首先我们可以用任何文本编辑器来创建源代码文件hello.kt。

<pre><code>
fun main(args: Array&lt;String&gt;) {
    println("Hello, Kotlin!")
}
</code></pre>

2. 使用 Kotlin 编译器编译

$ kotlinc hello.kt -include-runtime -d hello.jar

-d 选项制定输出的编译后的文件的名字，我们不仅可以指定输出jar包，也可以指定目录输出class文件。-include-runtime 选项指定输出的jar包可以独立运行且包含运行时的所有资源，包括Kotlin运行时库。

3. 运行我们第一个应用

$ java -jar hello.jar 
Hello, Kotlin!

我们的第一个 Kotlin 程序就完成了。

### 运行REPL

REPL的编程体验，使得我们可以通过不断的是错，调整，然后验证的方式来逼近我们的目标。我第一次接触REPL环境实际上是LISP和Python，开始的时候，我仅仅把它们当作一个游戏过程，或者是简单逻辑的测试。但是，慢慢的，我发现，一旦开始了，就无法停下，很多程序我从前都会封装成命令行应用或者守护进程模式运行，现在，我的很多程序或者脚本都没有main函数。同时当你慢慢的习惯编写函数式的代码，慢慢的你会发现，你的代码已经形成了一套自己的函数库，可以让你像写文章一样的写出一行功能强大的语句来完成你的工作。

$ kotlinc-jvm
Welcome to Kotlin version 1.1.3-2 (JRE 1.8.0_131-b11)
Type :help for help, :quit for quit
>>> 2+2
>>> 4
>>> println("Hello Kotlin")
Hello Kotlin
>>>
>>> println("Hello Kotlin")
Hello Kotlin
>>>
>>> fun sayHello(str: String) {
...     println(str)
... }
>>> 
>>> sayHello("Hello Kotlin")
Hello Kotlin

在REPL环境下，我们可以直接输入表达式回车来执行，也可以定义我们的函数和类。也同样可以导入我们已经写好的其他的资源。

### 命令行运行Kotlin脚本

和Groovy语言一样，Kotlin也可以支持脚本模式，我们可以编写Kotlin脚本，Kotlin的脚本扩展名为.kts。 

<pre><code>
import java.io.File

val folders = File(args[0]).listFiles { file -> file.isDirectory() }
folders?.forEach { folder -> println(folder) }
</code></pre>

我们需要使用-script选项，编译器就会执行我们的脚本。

$ kotlinc -script list_folders.kts &lt;path_to_folder_to_inspect&gt;

### IDEA

IDEA是非常出色的开发环境，我们可以使用IDEA来开发服务器端程序，IDEA分为社区版本和收费版本，如果仅仅做后台开发，使用社区版本已经足够。但是如果我们希望开发前端代码，最好使用收费的版本，会增加代码重复检测，版本控制（Perforce, ClearCase, TFS）, JavaScript，TypeScript。

IDEA的下载地址是http://www.jetbrains.com/idea/download

1. 下载最新版本的IDEA并安装，从IDEA version 15 后，Kotlin开发环境被默认绑定到IDEA中，因此，下载后，我们就可以直接开始我们的工作了。
2. 新建一个project，我们可以选择java Module，并添加Kotlin（Java）然后点击下一步。

<img src="./images/new_project_step1.png"/>

3. 给我们的项目起个名字

